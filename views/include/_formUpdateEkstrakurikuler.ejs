<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-header">
        <div class="card-title">Update Ekstrakurikular</div>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <form action="/updateEkstrakurikuler/<%= ekskul.ekskul_id %>" method="POST" enctype="multipart/form-data" onsubmit="return prepareEkstrakurikulerSubmit()">
                <!-- Display current image -->
                <label for="currentImage">Current Foto Ekstrakurikular</label><br />
                <% if (ekskul.ekskulimg) { %>
                  <img src="/uploads/<%= ekskul.ekskulimg %>" alt="Current Image" width="150" /><br /><br />
                <% } else { %>
                  <p>No image available</p><br />
                <% } %>

                <!-- File upload input -->
                <label for="image">Update Foto Ekstrakurikular</label><br />
                <input type="file" class="form-control-file" id="image" name="image" /><br />
                <small style="color: gray; font-size: 0.85rem;">*Max file size: 2 MB</small><br />

                <!-- Judul field -->
                <label for="judul">Judul</label>
                <input
                  type="text"
                  class="form-control"
                  id="judul"
                  name="judul"
                  value="<%= ekskul.judul %>"
                  placeholder="Masukan judul.."
                /><br />

                <!-- Sub Judul field -->
                <label for="subjudul">Sub Judul</label>
                <input
                  type="text"
                  class="form-control"
                  id="subjudul"
                  name="subjudul"
                  value="<%= ekskul.subjudul %>"
                  placeholder="Masukan sub judul.."
                /><br />

                <!-- Guru selection dropdown -->
                <label for="guru_id">Pembimbing Ekstrakurikuler</label>
                <select
                  class="form-control"
                  id="guru_id"
                  name="guru_id"
                  required
                >
                  <option value="">-- Pilih Guru Pembimbing --</option>
                  <% guruList.forEach(guru => { %>
                    <option 
                      value="<%= guru.guru_id %>" 
                      <%= guru.guru_id === ekskul.guru_id ? 'selected' : '' %>>
                      <%= guru.nama %>
                    </option>
                  <% }) %>
                </select>
                <br/>

                <!-- Keterangan textarea -->
                <label for="keterangan">Tentang Ekstrakurikuler</label>
                <!-- Quill Editor -->
                <div id="editor-ekstrakurikuler"><%- ekskul.keterangan %></div>
                <!-- Hidden input to store Quill content -->
                <input type="hidden" name="keterangan" id="keteranganekstrakurikuler" value="<%= ekskul.keterangan %>" /></br></br>
            </div>

            <!-- Submit and cancel buttons -->
            <div class="card-action">
              <button class="btn btn-success" type="submit">Submit</button>
              <!-- Dynamically set the Cancel button's href based on the user's role -->
              <a 
                href="/ekstrakurikuler"
              >
                <button class="btn btn-danger" type="button">Cancel</button>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

